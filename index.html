<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>High-Yield Stealth Engine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; }
        .grid-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 10px; padding: 15px; }
        .node { 
            background: #0a0a0a; border: 2px solid #1a1a1a; height: 150px; 
            border-radius: 12px; position: relative; overflow: hidden;
        }
        /* The "Active View" Fix: Ensures ads think they are 100% visible */
        iframe { 
            width: 100%; height: 100%; border: none;
            opacity: 0; transition: opacity 1s;
            pointer-events: auto;
        }
        .active iframe { opacity: 1; }
        .active { border-color: #00ff88 !important; }
        
        /* Interaction Overlay to trigger "Human" detection */
        .touch-layer {
            position: absolute; inset: 0; z-index: 10;
            background: transparent; pointer-events: none;
        }
    </style>
</head>
<body>

<header class="p-4 bg-black border-b border-gray-900 sticky top-0 z-50">
    <div class="max-w-7xl mx-auto flex justify-between items-center">
        <div>
            <h1 class="text-xs font-bold text-green-500 uppercase tracking-tighter">Counting Engine Active</h1>
            <p id="status" class="text-[9px] text-gray-500 font-mono">BYPASSING VIEW-CHECK...</p>
        </div>
        <div class="text-right text-[10px] font-bold text-blue-500">
            LOADED: <span id="count">0</span>/25
        </div>
    </div>
</header>

<div id="grid" class="grid-container"></div>

<script>
    const CONFIG = {
        url: "https://www.effectivegatecpm.com/jwi8z6qivr?key=61275ef83142835aded022a273c53d3b",
        total: 25,
        delay: 300
    };

    let loaded = 0;

    window.onload = () => {
        const grid = document.getElementById('grid');
        for (let i = 0; i < CONFIG.total; i++) {
            setTimeout(() => spawnNode(i, grid), i * CONFIG.delay);
        }
    };

    function spawnNode(id, container) {
        const div = document.createElement('div');
        div.className = "node";
        div.innerHTML = `
            <div class="touch-layer" id="touch-${id}"></div>
            <iframe id="f-${id}" 
                    allow="autoplay; fullscreen" 
                    sandbox="allow-scripts allow-same-origin allow-forms"
                    src="about:blank"></iframe>
        `;
        container.appendChild(div);

        const frame = document.getElementById(`f-${id}`);
        
        // --- THE "COUNT" FIXES ---
        
        // 1. Random Interaction Simulation
        setInterval(() => {
            if(div.classList.contains('active')) {
                // Mimics a "Window Focus" event so the ad thinks it's being watched
                frame.contentWindow.postMessage('focus', '*'); 
            }
        }, 5000 + (Math.random() * 5000));

        // 2. Delayed Source Injection (Bypasses initial Bot-Check)
        setTimeout(() => {
            const stealthUrl = `${CONFIG.url}&view=true&id=${id}&r=${Math.random().toString(36).substr(2, 9)}`;
            frame.src = stealthUrl;
        }, 100);

        frame.onload = () => {
            loaded++;
            div.classList.add('active');
            document.getElementById('count').innerText = loaded;
            document.getElementById('status').innerText = "V-STATUS: VALIDATING VIEWS...";
        };
    }

    // 3. Page Visibility Fix (Keeps ads running even if you switch tabs)
    Object.defineProperty(document, 'visibilityState', {value: 'visible', writable: false});
    Object.defineProperty(document, 'hidden', {value: false, writable: false});
</script>
</body>
</html>
